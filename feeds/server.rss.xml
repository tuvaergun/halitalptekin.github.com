<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>{ Halit Alptekin }</title><link>http://www.halitalptekin.com/</link><description></description><atom:link href="http://www.halitalptekin.com/feeds/server.rss.xml" rel="self"></atom:link><lastBuildDate>Fri, 08 Jun 2012 00:00:00 +0300</lastBuildDate><item><title>Ajenti Panel</title><link>http://www.halitalptekin.com/ajenti-panel.html</link><description>&lt;p&gt;Server yonetimi gerçekten zor bir iştir.Çunku uğraşacağınız,kontrol etmeniz gereken birçok şey vardır.İşte bu durumları kolaylaştırmak için server yonetim panelleri uretilmiştir.Bunların en bilinenleri Cpanel,Plesk ve Directadmindir.Bunların yanına webmin,virtualmin de eklenebilir.İşte bu paneller çoğaldıkça aralarındaki rekabette artmaya devam ediyor.Cpanel ve Plesk kullanım kolaylığı ile şu anda ulkemizde ve dunyada favori durumundalar.Ama ilerleyen zamanlarda ne olur tam bilinmez.&lt;/p&gt;
&lt;p&gt;Bende serverı ilk aldığım zamanlar yonetim paneli kurmayı pek duşunmuyordum.Hatta aldığım yerde bana plesk kurabileceklerini soylediklerinde gerek olmadığı sadece boş bir şekilde almak istediğimi soylemiştim.Ama zamanla işlerin biraz zorlaştığını gorunce uygun bir panel bulmam gerektiğini duşundum ve arayışlara başladım.Bu arayışımın en temel faktoru kesinlikle kaynak kullanımı oldu.Her konuda olduğu gibi burada da en az kaynak tuketen paneli aradım.Çunku tek bir site için plesk veya cpanel kurmak anlamsız geliyordu.Uzun bir arayıştan sonra neredeyse tam olarak istediğim bir panel olan Ajenti ile tanıştım.Gerçektende hem az kaynak kullanımı ve harika gorselliği ile beni etkiledi.Eğer sizde serverınızda çok fazla site barındırmıyorsanız ve az kaynak tuketen bir panel arıyorsanız kesinlikle ajantiye goz atın derim.&lt;/p&gt;
&lt;p&gt;Ajenti hakkında aklınızda ufak bir ipucu oluşması için aşağıdaki resimlere bakmanız yeterli.Eğer hoşunuza giderse kurulum aşamasına geçebilirsiniz.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Giriş Paneli&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://ajenti.org/misc/features/1.png"&gt;&lt;img alt="Ajenti Dashboard" src="http://ajenti.org/misc/features/1.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Firewall Ayarları&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href="http://ajenti.org/misc/features/2.png"&gt;&lt;img alt="Firewall Ayarlari" src="http://ajenti.org/misc/features/2.png" /&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Editor&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href="http://ajenti.org/misc/features/8.png"&gt;&lt;img alt="Ajenti Editor" src="http://ajenti.org/misc/features/8.png" /&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Debian Kurulumu&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Eğer Debian 5'e kuracaksanız serverınızda Python 2.6 olması gerekmektedir.Debian 6'ya kurmak isterseniz herhangi bir şey yuklemenize gerek yok.Direk aşağıdaki komutları çalıştırarak kurulum yapabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;deb&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//repo.ajenti.org/debian main main&lt;/span&gt;
&lt;span class="n"&gt;wget&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//repo.ajenti.org/debian/key -O- | sudo apt-key add&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Panel kurulduğunda default kullanıcı adı ve şifresi admin'dir.Panel portu ise :8000 dir.İlk girişte şifrenizi değiştirmenizi isteyecektir.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;FreeBSD Kurulumu&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://repo.ajenti.org/port.tar.gz"&gt;Buradaki&lt;/a&gt; arşivi indirip dosyalarını çıkartın.Dosyaları çıkarttığınız klasore geçerek &lt;strong&gt;make install&lt;/strong&gt; komutuyla kurulumu başlatabilirsiniz.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CentOS Kurulumu&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Öncelikle &lt;strong&gt;/etc/yum.repos.d/ajenti.repo&lt;/strong&gt; dosyasını oluşturup içine aşağıdaki satırları yazıyoruz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;[ajenti]&lt;/span&gt;
&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Ajenti&lt;/span&gt;
&lt;span class="na"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;http://repo.ajenti.org/centos/$releasever/$basearch/&lt;/span&gt;
&lt;span class="na"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Daha sonra &lt;strong&gt;yum install ajenti&lt;/strong&gt; diyerek kurulumu başlatabiliriz.Debian'da olduğu girip standart port 8000,kullanıcı adı ve şifre de admindir.&lt;/p&gt;
&lt;p&gt;Bunların yanında Arch ve Gentoo dağıtımlarına da kurulum yapabilirsiniz.Bunlara &lt;a href="http://ajenti.org"&gt;Ajenti&lt;/a&gt;'nin resmi sitesinden ulaşabilirsiniz.Ajenti ile ilgili &lt;a href="http://wiki.ajenti.org/"&gt;Wiki&lt;/a&gt; sayfasına ve &lt;a href="https://bugs.launchpad.net/ajenti"&gt;bug&lt;/a&gt; merkezine bakmayı da unutmayınız.&lt;/p&gt;
&lt;p&gt;Kurulum ile ilgili aşağıdaki videoyu da izleyebilirsiniz.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">halit</dc:creator><pubDate>Fri, 08 Jun 2012 00:00:00 +0300</pubDate><guid>tag:www.halitalptekin.com,2012-06-08:ajenti-panel.html</guid><category>admin panel</category><category>ajenti</category><category>ajenti panel</category><category>centos</category><category>cpanel</category><category>debian</category><category>plesk</category></item><item><title>Twitter Üzerinden Server Kontrolü</title><link>http://www.halitalptekin.com/twitter-uezerinden-server-kontrolue.html</link><description>&lt;p&gt;Twitter'ın sms ile iletim ozelliğini kullanarak serverımla ilgili bilgileri almak uzun suredir duşunduğum birşeydi.Onu bugun gerçekleştirdim.Artık serverımda olup bitenleri belirli aralıklarla cep telefonuma alıyorum.Bu gelen mesajlarda serverdaki toplam bağlantı,syn paketleri,ram ve cpu kullanımı gibi bilgiler içeriyor.Boylelikle herhangi bir olağandışı durumda hemen mudahale etme şansım oldu.Bu sistemi biraz daha geliştirip Twitter uzerinden sistemde komut çalıştırma hatta SmsBlog uygulaması yapacağım.Bunlarla ilgili çalışmalara da çok yakında başlamayı duşunuyorum.&lt;/p&gt;
&lt;p&gt;Bu sistem için tweepy kullandım.Bunu kurmak için oncelikle aşağıdaki komutu girmeniz lazım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;easy_install&lt;/span&gt; &lt;span class="n"&gt;tweepy&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Veya&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;tweepy&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Daha sonra &lt;a href="https://dev.twitter.com/apps/new"&gt;buradaki &lt;/a&gt;linkle girip gerekli yerleri dolduruyoruz.Daha sonra &lt;strong&gt;Create Your Twitter App&lt;/strong&gt; dedikten sonra uygulamamız karşımıza gelecek.Burada &lt;strong&gt;Settings&lt;/strong&gt; sekmesinden &lt;strong&gt;Access&lt;/strong&gt; bolumune geçip &lt;strong&gt;Read, Write and Access direct messages&lt;/strong&gt;'ı seçiyoruz.&lt;strong&gt;OAuth tool&lt;/strong&gt; sekmesinden bulunan &lt;strong&gt;Consumer key:&lt;/strong&gt;  ile&lt;strong&gt; Consumer secret:&lt;/strong&gt; lerimizi bir kenara kaydediyoruz.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ACCESS_KEY&lt;/strong&gt; ve &lt;strong&gt;ACCESS_SECRET&lt;/strong&gt; imizi oğrenmek için bir ufak bir kod yazmamız lazım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tweepy&lt;/span&gt;
&lt;span class="n"&gt;CONSUMER_KEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;consumer_key buraya yazin&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;CONSUMER_SECRET&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;consumer_secret buraya yazin&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;auth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tweepy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OAuthHandler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CONSUMER_KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CONSUMER_SECRET&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;auth_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;auth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_authorization_url&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;Onaylama: &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;auth_url&lt;/span&gt;
&lt;span class="n"&gt;verifier&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;raw_input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;PIN: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;auth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_access_token&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;verifier&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ACCESS_KEY = &amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;auth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;access_token&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ACCESS_SECRET = &amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;auth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;access_token&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;secret&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yukarıdaki kodumuzu python ile çalıştırdıktan sonra onumuze bir link çıkacak.O linke giriş yaptığımızda pin kodu ekrana gelecek.O pin kodunu konsolda bekleyen satıra yazıyoruz.Boylelikle bize &lt;strong&gt;ACCESS_KEY&lt;/strong&gt; ile &lt;strong&gt;ACCESS_SECRET&lt;/strong&gt; kodumuzu geri dondurecek.&lt;/p&gt;
&lt;p&gt;Şimdi de deneme tweetimizi atalım.Aşağıdaki kod ile serverınızla ilgili bazı bilgileri alabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tweepy&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;commands&lt;/span&gt;
&lt;span class="n"&gt;consumer_anahtari&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;consumer_key yaziniz&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;consumer_gizli&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;consumer_secret yaziniz&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;giris_anahtari&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;access_key yaziniz&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;giris_gizli&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;access_secret yaziniz&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;baglanti&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getoutput&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;echo `netstat -an|wc -l`&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;load&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getoutput&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&amp;quot;uptime | awk -F &amp;quot;load average: &amp;quot; &amp;#39;{ print $2 }&amp;#39; | cut -d, -f1 | cut -d. -f1&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;syn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getoutput&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;netstat -n | grep SYN | wc -l&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;memory&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getoutput&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&amp;quot;free -t -m | grep &amp;quot;Total&amp;quot; | awk &amp;#39;{ print &amp;quot;Kullanilan : &amp;quot;$3&amp;quot; MB Bosta : &amp;quot;$4&amp;quot; MB&amp;quot;;}&amp;#39;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;auth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tweepy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OAuthHandler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;consumer_anahtari&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;consumer_gizli&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;auth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_access_token&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;giris_anahtari&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;giris_gizli&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;api&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tweepy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;API&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;auth&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;api&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update_status&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Toplam &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;baglanti&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; baglanti var.Sistem load su anda &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; .Toplam &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;syn&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; syn paketi bulundu. &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;memory&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; .&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Örnek twitter gonderisi aşağıdaki gibi oluyor.Sizde yukarıdaki kodda değişiklikler yapıp istediğiniz herhangi bir komutu çalıştırıp twittera bildirebilirsiniz.Yukarıda yer alan &lt;strong&gt;commands.getoutput(' ')&lt;/strong&gt; içine istediğiniz bir komutu çalıştırabilirsiniz.Örneğin nginx'e restart attırabilir,cacheleri boşaltabilir,sql yedeğinizi alabilirsiniz.Bundan sonrası sizin hayal gucunuze kalıyor.&lt;/p&gt;
&lt;p&gt;&lt;img alt="HDBlog Twitter" src="http://www.halitalptekin.com/media/upload/hdblog-twitter.png" /&gt;&lt;/p&gt;
&lt;p&gt;Ve cep telefonuma gelen sms orneği.&lt;/p&gt;
&lt;p&gt;&lt;img alt="HDBlog Sms Status Sender" src="http://www.halitalptekin.com/media/upload/hdblog-sms-status-sender.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;Yukarıdaki dosyayı python dosyası olarak kaydedip cronjob eklerseniz belirli aralıklarla twitter'a gonderebilirsiniz.Bunun için &lt;strong&gt;crontab -e&lt;/strong&gt; komutu ile cron listenizi açın ve aşağıdaki satırı ekleyin.(Aşağıdaki satır ile dosyayı 4 saatte bir çalıştırabilirsiniz.Eğer başka zamanlarda çalıştırmak isterseniz google'da crontab kullanımı diye aratabilirsiniz.)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="err"&gt;*/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;hdblogstatus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Twitter Python" src="http://www.halitalptekin.com/media/upload/twitter-python.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;Artık 4 saatte bir server durumunu tweet olarak atıyoruz.Sıra bu bilgileri telefonumuza almakta.Bunun için twitterımıza giriş yapıp &lt;a href="https://twitter.com/settings/devices"&gt;buradaki&lt;/a&gt; bolume geçiyoruz.Burada yer alan &lt;strong&gt;Cep telefonu bildirimlerini etkinleştirdiğin kişilerden gelen tweetler&lt;/strong&gt; sekmesini işaretliyoruz.Daha sonrada bilgilerimizi paylaştığımız twitter hesabına girip mobil bildirimleri açıyoruz.&lt;/p&gt;
&lt;p&gt;Butun bunları yaptığınızda 4 saatte bir 2444'ten server bilgilerinizi içeren bir sms almanız lazım.Şimdilik bu kadarı benim işimi goruyor.Siz kodu geliştirip ihtiyaçlarınız doğrultusunda geliştirebilirsiniz.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Önemli Not:&lt;/strong&gt; Bilgilerinizi paylaştığınız twitter hesabının tweetlerini koruma altına almaya unutmayınız.Ve tanımadığınız kişilerin bu bilgilere erişmemesini sağlayınız.&lt;/p&gt;
&lt;p&gt;Yukarıdaki python kodunu &lt;a href="https://gist.github.com/2891358"&gt;buradanda&lt;/a&gt; indirebilirsiniz.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">halit</dc:creator><pubDate>Thu, 07 Jun 2012 00:00:00 +0300</pubDate><guid>tag:www.halitalptekin.com,2012-06-07:twitter-uezerinden-server-kontrolue.html</guid><category>python</category><category>server management</category><category>server yönetimi</category><category>tweepy</category><category>twitter</category><category>twitter sms</category></item><item><title>Server Yönetimi İçin Yararlı Komutlar</title><link>http://www.halitalptekin.com/server-yoenetimi-icin-yararli-komutlar.html</link><description>&lt;p&gt;Her ne kadar hala ulkemizde kişisel site ihtiyaçlarını hosting firmaları karşılasa da bir zamandan sonra bu size yeterli gelmeyebilir.Bu gibi durumlar kendi serverınıza geçme ihtiyacı duyabilirsiniz.Bu yuzden az da olsa server yonetimi konusunda bilgi sahibi olmanız lazım.Server yonetimi diğer birçok dala gore zordur.Çunku sorunun yanında birde getirdiği dar zamanda stres yonetimi vardır.Gerçekten buyuk firmalarda,serverlarda yoneticilik yapanlar işleri çok zordur.Ben bugun sizlere kendi serverımda surekli olarka kullandığım yararlı birkaç bash kodlarından bahsetmek istiyorum.Eminim sizinde işinize yarayacak kodlar olabilir.Kendi ihtiyaçlarınıza gore değiştirip kullanabilirsiniz.&lt;/p&gt;
&lt;p&gt;İstediğiniz bir ip adresini aşağıdaki Banlanacak_Ip_Adresi yerine yazarsanız o ip adresini serverdan banlamış olursunuz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;iptables&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;INPUT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;Banlanacak_Ip_Adresi&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;DROP&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Serverdaki bağlantı ve turlerini oğrenebilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;netstat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ntu&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;awk&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;print&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;cut&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;:&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;sort&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;uniq&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;sort&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Serverda fazla bağlantı açap ip adresleri.Buradan aldığınız ip adreslerini isteğiniz doğrultusunda ilk verdiğim komut ile serverdan uzaklaştırabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;netstat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ntu&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;awk&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;print&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;cut&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;:&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;sort&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;uniq&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;sort&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;awk&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;print&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sunucudaki toplam bağlantı sayısını aşağıdaki komut ile oğrenebilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;netstat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;wc&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Serverınızın uzerindeki yukunu yani sistem load durumunu oğrenmek için aşağıdaki kodu kullanabilirsiniz.Bunu ara ara tekrarlayıp durumu kontrol etmekte fayda var.Önemli bir koddur.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;uptime&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;awk&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;load average: &amp;quot;&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;print&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;cut&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f1&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sunucudaki ping taleplerini ilk kodla kapatıp ikincisi ile açabilirsiniz.(1 kapatma 0 açma)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sysctl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ipv4&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;icmp_echo_ignore_all&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="o"&gt;:::&lt;/span&gt;&lt;span class="n"&gt;shell&lt;/span&gt;
&lt;span class="n"&gt;sysctl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ipv4&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;icmp_echo_ignore_all&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Serverınızdaki SYN paketlerini listeler.DDos açısından onemlidir.Fazla ise dikkat etmeniz gerekebilir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;netstat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ntu&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="n"&gt;SYN&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;awk&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;print&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;awk&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;sub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;::ffff:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;cut&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;:&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;sort&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;uniq&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;sort&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="n"&gt;Address&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="mf"&gt;127.0.0.1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="mf"&gt;0.0.0.0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Aşağıdaki bash scripti bir forumda gormuştum.Aynen paylaşıyorum.Fazla SYN Paketi gelen ip adreslerini banlar.Ufak çaplı saldırıları onleyebilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/bin/sh&lt;/span&gt;

&lt;span class="c"&gt;# Saldiri varmi ?&lt;/span&gt;
&lt;span class="nv"&gt;SYNCOUNT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;netstat -n | grep SYN | wc -l&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$SYNCOUNT&lt;/span&gt; -gt 20 &lt;span class="o"&gt;]&lt;/span&gt; ; &lt;span class="k"&gt;then&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$SYNCOUNT SYN Bulundu! Banlama basliyor lutfen bekleyin.&amp;quot;&lt;/span&gt;

&lt;span class="c"&gt;# Sunucu iplerini beyaz liste alalim.&lt;/span&gt;
ip addr show|grep inet|grep -v 127.0.0.1|grep -v inet6|awk &lt;span class="s1"&gt;&amp;#39;{print $2}&amp;#39;&lt;/span&gt;|cut -d: -f9|cut -d/ -f1|while &lt;span class="nb"&gt;read &lt;/span&gt;ipler; &lt;span class="k"&gt;do &lt;/span&gt;touch /tmp/&lt;span class="nv"&gt;$ipler&lt;/span&gt;.tk; &lt;span class="k"&gt;done&lt;/span&gt;

&lt;span class="c"&gt;# Bloklanicak Paket Sayisi&lt;/span&gt;
&lt;span class="c"&gt;#Default deger BPAKET=40&lt;/span&gt;
&lt;span class="nv"&gt;BPAKET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;40
&lt;span class="c"&gt;# Incelenecek Paket Sayisi&lt;/span&gt;
&lt;span class="c"&gt;# Default deger SPAKET=5000&lt;/span&gt;
&lt;span class="nv"&gt;SPAKET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;5000
&lt;span class="c"&gt;# Inceleyelim.&lt;/span&gt;
tcpdump -n -q -c &lt;span class="nv"&gt;$SPAKET&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tcp[tcpflags] &amp;amp; tcp-syn != 0 and dst port 80&amp;#39;&lt;/span&gt;| awk &lt;span class="s1"&gt;&amp;#39;{print $3}&amp;#39;&lt;/span&gt;|awk -F. -v &lt;span class="nv"&gt;n&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;. &lt;span class="s1"&gt;&amp;#39;{print $1 n $2 n $3 n $4}&amp;#39;&lt;/span&gt;|sort|uniq -c|sort -nr|awk &lt;span class="s1"&gt;&amp;#39;$1 &amp;gt; $PAKET&amp;#39;&lt;/span&gt;|awk &lt;span class="s1"&gt;&amp;#39;{print $2}&amp;#39;&lt;/span&gt;|while &lt;span class="nb"&gt;read &lt;/span&gt;ipler;
&lt;span class="k"&gt;do if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; ! -f /tmp/&lt;span class="nv"&gt;$ipler&lt;/span&gt;.tk &lt;span class="o"&gt;]&lt;/span&gt;; &lt;span class="k"&gt;then&lt;/span&gt;
touch /tmp/&lt;span class="nv"&gt;$ipler&lt;/span&gt;.tk &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; iptables -A INPUT -s &lt;span class="nv"&gt;$ipler&lt;/span&gt; -j DROP &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$ipler&lt;/span&gt; blokladim;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;

&lt;span class="c"&gt;# Cikalim.&lt;/span&gt;
&lt;span class="k"&gt;else&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$SYNCOUNT SYN Bulundu! Saldiri tespit edilmedi...&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="nb"&gt;exit &lt;/span&gt;0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Aşağıdaki script sistem loadın yukseldiği durumlar istediğiniz servislere rest atmanızı ve bunu mail ile size bildirmeye yarar.Gayet faydalıdır.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#/usr/bin/!&lt;/span&gt;
&lt;span class="cp"&gt;# Sistem Load Degeri load=&amp;quot;&amp;quot; arasindaki degeri astiginda program calisip servislerinize reset atacak&lt;/span&gt;
&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;60&amp;quot;&lt;/span&gt;


&lt;span class="cp"&gt;######### Resetlenecek servisler baslar #########&lt;/span&gt;
&lt;span class="n"&gt;loadkomutu&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;uptime&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;awk&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;load average: &amp;quot;&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;print&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;cut&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;cut&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f1&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;
&lt;span class="n"&gt;mailload&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;uptime&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;awk&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;load average: &amp;quot;&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;print&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;cut&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f1&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;$loadkomutu&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ge&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;$load&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;then&lt;/span&gt;
&lt;span class="cp"&gt;######### Resetlenecek servisler baslar #########&lt;/span&gt;
&lt;span class="n"&gt;pkill&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="n"&gt;httpd&lt;/span&gt;
&lt;span class="cp"&gt;######### Resetlenecek servisler biter #########&lt;/span&gt;

&lt;span class="n"&gt;zaman&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d.%m.%Y - %T&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;
&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Servisler en son su tarihte yeniden baslatildi : $zaman&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;kontrol&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;

&lt;span class="n"&gt;TMP_PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;gidenmail&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;TMP_FILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;mktemp $TMP_PREFIX.XXXXXXXX&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;mailicerigi&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;`$&lt;/span&gt;&lt;span class="n"&gt;TMP_FILE&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;

&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Tarih : $zaman&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;mailicerigi&lt;/span&gt;
&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Sistem Load Yuksek: $mailload&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;mailicerigi&lt;/span&gt;

&lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;$mailicerigi&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;mail&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;$zaman UYARI: Yuksek Load $mailload&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="k"&gt;else&lt;/span&gt;
&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Sorun yok&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;httpd&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;
&lt;span class="n"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hemen aşağıdaki scripti ben surekli olan kullanırım.Arka planda çalışan programların ne kadar işlemci ve ram kullandığını oğrenmemizi sağlar.Dosya ismini islem.sh olarak kaydederseniz ./islem.sh mem veya ./islem.sh cpu komutlarını kullanarak çalıştırabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#! /bin/bash&lt;/span&gt;
&lt;span class="c"&gt;#List processes based on %cpu and memory usage&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Start Time&amp;quot;&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;date&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="c"&gt;# By default, it display the list of processes based on the cpu and memory usage #&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$# &lt;/span&gt;-eq 0 &lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;then&lt;/span&gt;

&lt;span class="k"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;List of processes based on the %cpu Usage&amp;quot;&lt;/span&gt;
    ps -e -o pcpu,cpu,nice,state,cputime,args -sort pcpu  &lt;span class="c"&gt;# sorted based on %cpu&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;List of processes based on the memory Usage&amp;quot;&lt;/span&gt;
    ps -e -orss&lt;span class="o"&gt;=&lt;/span&gt;,args&lt;span class="o"&gt;=&lt;/span&gt; | sort -b -k1,1n &lt;span class="c"&gt;# sorted bases rss value&lt;/span&gt;

&lt;span class="c"&gt;# If arguements are given (mem/cpu)&lt;/span&gt;
&lt;span class="k"&gt;else&lt;/span&gt;
&lt;span class="k"&gt;    case&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;$1¨ in&lt;/span&gt;
&lt;span class="s2"&gt;    mem)&lt;/span&gt;
&lt;span class="s2"&gt;     echo &amp;quot;&lt;/span&gt;List of processes based on the memory Usage&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;      ps -e -orss=,args= | sort -b -k1,1n&lt;/span&gt;
&lt;span class="s2"&gt;     ;;&lt;/span&gt;
&lt;span class="s2"&gt;     cpu)&lt;/span&gt;
&lt;span class="s2"&gt;     echo &amp;quot;&lt;/span&gt;List of processes based on the %cpu Usage&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;     ps -e -o pcpu,cpu,nice,state,cputime,args -sort pcpu&lt;/span&gt;
&lt;span class="s2"&gt;     ;;&lt;/span&gt;
&lt;span class="s2"&gt;     *)&lt;/span&gt;
&lt;span class="s2"&gt;        echo &amp;quot;&lt;/span&gt;Invalid Argument Given &lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;        echo &amp;quot;&lt;/span&gt;Usage : &lt;span class="nv"&gt;$0&lt;/span&gt; mem/cpu&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;        exit 1&lt;/span&gt;
&lt;span class="s2"&gt;     esac&lt;/span&gt;

&lt;span class="s2"&gt;fi&lt;/span&gt;
&lt;span class="s2"&gt;echo &amp;quot;&lt;/span&gt;End Time&lt;span class="err"&gt;&amp;quot;&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;date&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="nb"&gt;exit &lt;/span&gt;0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sisteme bağlı kullanıcıların ne kadar işlemci kullandıklarını gormek için aşağıdaki scripti çalıştırabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#! /bin/bash&lt;/span&gt;

w &amp;gt; /tmp/a

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Total number of unique users logged in currently&amp;quot;&lt;/span&gt;
cat /tmp/a|  sed &lt;span class="s1"&gt;&amp;#39;1,2d&amp;#39;&lt;/span&gt; | awk &lt;span class="s1"&gt;&amp;#39;{print $1}&amp;#39;&lt;/span&gt; | uniq | wc -l
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;List of unique users logged in currently&amp;quot;&lt;/span&gt;
cat /tmp/a | sed &lt;span class="s1"&gt;&amp;#39;1,2d&amp;#39;&lt;/span&gt;|  awk &lt;span class="s1"&gt;&amp;#39;{print $1}&amp;#39;&lt;/span&gt; | uniq
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The user who is using high %cpu&amp;quot;&lt;/span&gt;
cat /tmp/a | sed &lt;span class="s1"&gt;&amp;#39;1,2d&amp;#39;&lt;/span&gt; | awk   &lt;span class="s1"&gt;&amp;#39;$7 &amp;gt; maxuid { maxuid=$7; maxline=$0 }; END { print maxuid, maxline }&amp;#39;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;List of users logged in and what they are doing&amp;quot;&lt;/span&gt;
cat /tmp/a
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Aşağıdaki script kullanılan ve kullanılmayan ram miktarını gosteriyor.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#! /bin/bash&lt;/span&gt;

&lt;span class="c"&gt;# Total memory space details&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Memory Space Details&amp;quot;&lt;/span&gt;
free -t -m | grep &lt;span class="s2"&gt;&amp;quot;Total&amp;quot;&lt;/span&gt; | awk &lt;span class="s1"&gt;&amp;#39;{ print &amp;quot;Total Memory space : &amp;quot;$2 &amp;quot; MB&amp;quot;;&lt;/span&gt;
&lt;span class="s1"&gt;print &amp;quot;Used Memory Space : &amp;quot;$3¨ MB&amp;quot;;&lt;/span&gt;
&lt;span class="s1"&gt;print &amp;quot;Free Memory : &amp;quot;$4¨ MB&amp;quot;;&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Swap memory Details&amp;quot;&lt;/span&gt;
free -t -m | grep &lt;span class="s2"&gt;&amp;quot;Swap&amp;quot;&lt;/span&gt; | awk &lt;span class="s1"&gt;&amp;#39;{ print &amp;quot;Total Swap space : &amp;quot;$2 &amp;quot; MB&amp;quot;;&lt;/span&gt;
&lt;span class="s1"&gt;print &amp;quot;Used Swap Space : &amp;quot;$3¨ MB&amp;quot;;&lt;/span&gt;
&lt;span class="s1"&gt;print &amp;quot;Free Swap : &amp;quot;$4¨ MB&amp;quot;;&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Not: &lt;/strong&gt;Yukarıda yer olan komutları ve kodları isteğiniz doğrultusunda kullnabilir ve ozelleştirebilirsiniz.Bana sorarsanız birçoğuna cronjob atayıp duzenli olarak çalıştırabilirsiniz.Hepsi birbirinden faydalıdır.Zamanla daha fazla eklemeye çalışacağım.Yukardakilerden bazılarını direk komut satırına girerek bazılarını da sh dosyası olarak kaydederek kullanabilirsiniz.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Sistem Yoneticiligi" src="http://www.halitalptekin.com/media/upload/adminspotting.med.jpg" /&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">halit</dc:creator><pubDate>Tue, 05 Jun 2012 00:00:00 +0300</pubDate><guid>tag:www.halitalptekin.com,2012-06-05:server-yoenetimi-icin-yararli-komutlar.html</guid><category>bash script</category><category>ddos koruması</category><category>server yönetimi</category><category>sistem yöneticiliği</category></item></channel></rss>